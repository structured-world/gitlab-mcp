# GitLab MCP Server Environment Configuration
# Copy this file to .env and fill in your values

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# GitLab Personal Access Token (REQUIRED)
# Create at: GitLab → Settings → Access Tokens
# Required scopes: api, read_user, read_repository
# For full functionality add: write_repository, read_api, write_api
GITLAB_TOKEN=your_gitlab_token_here

# GitLab API Base URL (REQUIRED)
# Examples:
#   GitLab.com: https://gitlab.com
#   Self-hosted: https://gitlab.company.com
#   Custom port: https://gitlab.company.com:8443
GITLAB_API_URL=https://gitlab.com

# ============================================================================
# TRANSPORT CONFIGURATION
# ============================================================================

# HTTP Streamable mode (recommended for web clients)
# Set to true for HTTP streaming transport
STREAMABLE_HTTP=true

# Server-Sent Events mode
# Set to true for SSE transport (note: only one transport should be true)
SSE=false

# Server host for HTTP/SSE modes
HOST=127.0.0.1

# Server port for HTTP/SSE modes
PORT=3000

# ============================================================================
# OPTIONAL GITLAB TARGETING
# ============================================================================

# Default project for operations that don't specify a target
# Format: "username/project" or "group/project" or project ID
# Leave empty if not using default targeting
GITLAB_PROJECT_ID=

# Default group for group-level operations
# Format: "group-name" or "parent-group/sub-group"
# Leave empty if not using default group targeting
GITLAB_GROUP_PATH=

# ============================================================================
# FEATURE FLAGS (GitLab Tier-specific)
# ============================================================================

# Enable Work Items (GitLab Premium/Ultimate)
# Set to false for GitLab Free tier
USE_WORKITEMS=true

# Enable Milestones (GitLab Premium/Ultimate for group milestones)
# Project milestones available in all tiers
USE_MILESTONE=true

# Enable CI/CD Pipelines (available in all tiers)
USE_PIPELINE=true

# Enable Wiki functionality (available in all tiers)
USE_GITLAB_WIKI=true

# ============================================================================
# SECURITY AND ACCESS CONTROL
# ============================================================================

# Read-only mode (disables all write operations)
# Recommended for security-sensitive environments
GITLAB_READ_ONLY_MODE=false

# Regex pattern to deny specific tools
# Example: "delete.*|create.*" to block delete and create operations
# Leave empty to allow all tools
GITLAB_DENIED_TOOLS_REGEX=

# ============================================================================
# LOGGING AND DEBUGGING
# ============================================================================

# Log level: error, warn, info, debug, trace
LOG_LEVEL=info

# Node.js environment
NODE_ENV=development

# ============================================================================
# NETWORK AND PROXY SETTINGS
# ============================================================================

# HTTP proxy for outbound requests
HTTP_PROXY=

# HTTPS proxy for outbound requests
HTTPS_PROXY=

# Comma-separated list of hosts to bypass proxy
NO_PROXY=localhost,127.0.0.1

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Node.js memory limit and options
NODE_OPTIONS=--max-old-space-size=512

# Health check endpoint
HEALTH_CHECK_ENABLED=true

# ============================================================================
# USAGE NOTES
# ============================================================================

# Transport Mode Priority:
# 1. STREAMABLE_HTTP=true (highest priority, recommended)
# 2. SSE=true (if STREAMABLE_HTTP!=true)
# 3. Stdio mode (if both STREAMABLE_HTTP and SSE are false)

# GitLab Tier Compatibility:
# - GitLab Free: Set USE_WORKITEMS=false
# - GitLab Premium/Ultimate: All features available

# Security Best Practices:
# - Use read-only mode for security-sensitive environments
# - Limit tool access with GITLAB_DENIED_TOOLS_REGEX
# - Use environment-specific API URLs and tokens